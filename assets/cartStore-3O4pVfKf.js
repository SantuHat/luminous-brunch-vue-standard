import{u as n,k as e}from"./index-_e0xypRU.js";var l={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"luminous",BASE_URL:"/luminous-brunch-vue-standard/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:r,VITE_PATH:d}=l,u=n("cartStore",{state:()=>({carts:[],final_total:0,total:0,cart:{},status:{addCartLoading:""},cartUpdated:!1}),actions:{addCart(a,t,s=1){this.status.addCartLoading=a,this.cart=t;const o=`${r}/api/${d}/cart`,i={data:{product_id:a,qty:s}};e.post(o,i).then(c=>{console.log("Pinia",c.data.data),this.status.addCartLoading="",this.cart=c.data.data,this.cartUpdated=!0}).catch(c=>{console.log(c)})},delCart(a){const{VITE_API:t,VITE_PATH:s}=l;e.delete(`${t}api/${s}/cart/${a}`).then(o=>{console.log(o.data),alert("刪除成功！"),this.getCarts()})},getCarts(){const a=`${r}/api/${d}/cart`;e.get(a).then(t=>{console.log(t.data),this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total}).catch(t=>{console.log(t)})},setCartUpdate(){this.cartUpdated=!1,console.log("購物車狀態更新"),this.getCarts()},getProduct(){const{id:a}=this.$route.params;this.$http.get(`${r}api/${d}/product/${a}`).then(t=>{console.log(t),this.product=t.data.product,this.matchCategory()}).catch(t=>{console.log(t)})},putCart(a,t){const s={data:{product_id:a,qty:t}};e.put(`${r}api/${d}/cart/${a}`,s).then(o=>{console.log(o.data),this.getCarts()}).catch(o=>{console.log(o)})}},getters:{cartData:({carts:a})=>a,cartTotal:({total:a})=>a}});export{u as c};
