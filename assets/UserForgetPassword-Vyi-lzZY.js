import{_ as u,r as h,o as p,c as m,b as s,n as a,q as n,v as i,t as w,f as d,d as b,w as _,e as g}from"./index-_e0xypRU.js";import{_ as f}from"./offerService-kqhXFcUq.js";const v={data(){return{isPost:!1,isResetViewClose:!0,userEmail:"",userValidateCode:"",usersData:{},userId:"",check:{newPassword:"",checkPassword:""}}},mounted(){this.isPost=!1},methods:{postValidateCode(){this.$http.get("https://demo-q3dk.onrender.com/users").then(t=>{console.log(t.data),console.log(this.userEmail,t.data[0]),this.isPost=!0,this.usersData=t.data,this.searchUserId()}).catch(t=>{console.log(t)})},searchUserId(){this.usersData.forEach(t=>{this.userEmail===t.email?(console.log(),this.userId=t.id,console.log("找到了",this.userId)):console.log("此信箱尚無會員資料，請先註冊帳號")})},patchNewPassword(){this.$http.patch(`https://demo-q3dk.onrender.com/users/${this.userId}`,{password:this.check.newPassword}).then(t=>{console.log(t),alert("修改成功"),this.$router.push("/userlogin")}).catch(t=>{console.log(t)})},resetPassword(){this.isResetViewClose=!1}}},x=s("div",{class:"login-bg"},[s("img",{src:f,alt:"#"})],-1),k={class:"container d-flex justify-content-center"},C={class:"login-body-bg row justify-content-center"},P=s("h1",{class:"h3 mb-3 font-weight-normal text-center text-light"},"忘記密碼",-1),V=s("label",{for:"inputEmail",class:"sr-only text-light"},"電子郵件",-1),y={class:"mb-2 input-group"},E=["disabled"],N={class:"text-light mb-0"},q=s("p",{class:"errorMessage"},null,-1),R={class:"mb-2"},U=s("label",{for:"validateCode",class:"sr-only text-light"},"驗證碼",-1),I=s("p",{class:"errorMessage"},null,-1),B={class:"text-center mt-4"},D=s("h1",{class:"h3 mb-3 font-weight-normal text-center text-light"},"重置密碼",-1),M=s("p",{class:"text-light"},"密碼請輸入6-12碼，英文與數字混和",-1),j=s("label",{for:"inputNewpassword",class:"sr-only text-light"},"輸入新密碼",-1),L=s("label",{for:"checkPassword",class:"sr-only text-light"},"再次輸入新密碼",-1),T=s("p",{class:"newErrorMessage"},null,-1),z={class:"text-center mt-4"},F={class:"d-flex justify-content-center"},S=s("p",{class:"text-light pe-3"},"尚未成為用戶?",-1);function A(t,e,G,H,o,r){const c=h("RouterLink");return p(),m("div",null,[x,s("div",k,[s("form",C,[s("div",{class:a(["login-body",{"d-none":!o.isResetViewClose}])},[P,V,s("div",y,[n(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.userEmail=l),type:"email",name:"passwordNewEmail",id:"inputEmail",class:"form-control",placeholder:"Email address",required:"",autofocus:""},null,512),[[i,o.userEmail]]),s("button",{onClick:e[1]||(e[1]=l=>r.postValidateCode()),class:"btn btn-outline-secondary btn-blue submitValidateEmail",type:"button",id:"button-addon2",disabled:o.isPost},[s("p",N,w(o.isPost?"已發送":"發送驗證碼"),1)],8,E)]),q,s("div",R,[U,n(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.userValidateCode=l),type:"password",id:"validateCode",name:"validateCode",class:"form-control",placeholder:"請輸入驗證碼",required:""},null,512),[[i,o.userValidateCode]])]),I,s("div",B,[s("button",{onClick:e[3]||(e[3]=d(l=>r.resetPassword(),["prevent"])),class:"btn btn-lg btn-blue btn-block w-100 submitValidateCode",type:"button",id:"submitValidateCodeBtn"},"確認 ")])],2),s("div",{class:a(["login-body",{"d-none":o.isResetViewClose}])},[D,M,j,n(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.check.newPassword=l),type:"password",name:"inputNewpassword",id:"inputNewpassword",class:"form-control w-100 mb-3",placeholder:"重置新密碼",required:"",autofocus:""},null,512),[[i,o.check.newPassword]]),L,n(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.check.checkPassword=l),type:"password",name:"passwordNewEmail",id:"checkPassword",class:"form-control w-100",placeholder:"再次輸入重置新密碼",required:"",autofocus:""},null,512),[[i,o.check.checkPassword]]),T,s("div",z,[s("button",{onClick:e[6]||(e[6]=d(l=>r.patchNewPassword(),["prevent"])),class:"btn btn-lg btn-blue btn-block w-100",type:"button",id:"confrimNewPasswordBtn"}," 確認 ")])],2),s("div",{class:a(["mt-3",{"d-none":!o.isResetViewClose}])},[s("div",F,[S,b(c,{to:"/userlogin",id:"pageChange",class:"text-decoration-none text-blue"},{default:_(()=>[g("立即註冊")]),_:1})])],2)])])])}const O=u(v,[["render",A]]);export{O as default};
